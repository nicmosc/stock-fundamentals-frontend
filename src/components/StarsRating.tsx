import { css, cx } from '@emotion/css';

import { Color } from '../utils';

const WIDTH = 180;

const styles = {
  container: css`
    position: relative;
  `,
  stars: css`
    width: ${WIDTH}px;

    svg {
      fill: ${Color.tertiary};
    }
  `,
  filled: css`
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;

    svg {
      fill: url(#gradient);
      filter: drop-shadow(0px 2px 2px rgba(250, 173, 20, 0.4));
    }

    &::before {
      content: ' ';
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      height: 10px;
      filter: blur(20px);
      opacity: 0.5;
      background: ${Color.gold.primary};
      z-index: 0;
    }
  `,
};

interface StarsProps {
  width?: number;
}

const Stars = ({ width = 1 }: StarsProps) => {
  return (
    <svg
      width="100%"
      height="100%"
      viewBox={`0 0 ${width * WIDTH} 29`}
      fill="none"
      xmlns="http://www.w3.org/2000/svg">
      <linearGradient
        id="gradient"
        x1="0%"
        y1="0%"
        x2="35%"
        y2="100%"
        gradientUnits="userSpaceOnUse"
        gradientTransform="rotate(266)">
        <stop offset="0%" style={{ stopColor: Color.yellow.primary, stopOpacity: 1 }} />
        <stop offset="100%" style={{ stopColor: Color.gold.primary, stopOpacity: 1 }} />
      </linearGradient>
      <path d="M28.2302 10.3723L19.3151 9.01053L15.3192 0.499026C15.0207 -0.136557 13.9779 -0.136557 13.6795 0.499026L9.68473 9.01053L0.769645 10.3723C0.0373945 10.4847 -0.255022 11.3752 0.258519 11.9009L6.73519 18.5394L5.20423 27.9246C5.08219 28.6701 5.87848 29.2296 6.53702 28.8634L14.4999 24.4627L22.4629 28.8647C23.1154 29.2272 23.9189 28.6786 23.7956 27.9258L22.2647 18.5407L28.7414 11.9021C29.2549 11.3752 28.9613 10.4847 28.2302 10.3723V10.3723Z" />
      <path d="M65.2302 10.3723L56.3151 9.01053L52.3192 0.499026C52.0207 -0.136557 50.9779 -0.136557 50.6795 0.499026L46.6847 9.01053L37.7696 10.3723C37.0374 10.4847 36.745 11.3752 37.2585 11.9009L43.7352 18.5394L42.2042 27.9246C42.0822 28.6701 42.8785 29.2296 43.537 28.8634L51.4999 24.4627L59.4629 28.8647C60.1154 29.2272 60.9189 28.6786 60.7956 27.9258L59.2647 18.5407L65.7414 11.9021C66.2549 11.3752 65.9613 10.4847 65.2302 10.3723V10.3723Z" />
      <path d="M102.23 10.3723L93.3151 9.01053L89.3192 0.499026C89.0207 -0.136557 87.9779 -0.136557 87.6795 0.499026L83.6847 9.01053L74.7696 10.3723C74.0374 10.4847 73.745 11.3752 74.2585 11.9009L80.7352 18.5394L79.2042 27.9246C79.0822 28.6701 79.8785 29.2296 80.537 28.8634L88.4999 24.4627L96.4629 28.8647C97.1154 29.2272 97.9189 28.6786 97.7956 27.9258L96.2647 18.5407L102.741 11.9021C103.255 11.3752 102.961 10.4847 102.23 10.3723V10.3723Z" />
      <path d="M139.23 10.3723L130.315 9.01053L126.319 0.499026C126.021 -0.136557 124.978 -0.136557 124.679 0.499026L120.685 9.01053L111.77 10.3723C111.037 10.4847 110.745 11.3752 111.259 11.9009L117.735 18.5394L116.204 27.9246C116.082 28.6701 116.878 29.2296 117.537 28.8634L125.5 24.4627L133.463 28.8647C134.115 29.2272 134.919 28.6786 134.796 27.9258L133.265 18.5407L139.741 11.9021C140.255 11.3752 139.961 10.4847 139.23 10.3723V10.3723Z" />
      <path d="M176.23 10.3723L167.315 9.01053L163.319 0.499026C163.021 -0.136557 161.978 -0.136557 161.679 0.499026L157.685 9.01053L148.77 10.3723C148.037 10.4847 147.745 11.3752 148.259 11.9009L154.735 18.5394L153.204 27.9246C153.082 28.6701 153.878 29.2296 154.537 28.8634L162.5 24.4627L170.463 28.8647C171.115 29.2272 171.919 28.6786 171.796 27.9258L170.265 18.5407L176.741 11.9021C177.255 11.3752 176.961 10.4847 176.23 10.3723V10.3723Z" />
    </svg>
  );
};

interface StarsRatingProps {
  rating: number;
}

export const StarsRating = ({ rating }: StarsRatingProps) => {
  return (
    <div className={styles.container}>
      <div className={styles.stars}>
        <Stars />
      </div>
      <div className={cx(styles.stars, styles.filled)} style={{ width: WIDTH * (rating * 0.2) }}>
        <Stars width={rating * 0.2} />
      </div>
    </div>
  );
};
